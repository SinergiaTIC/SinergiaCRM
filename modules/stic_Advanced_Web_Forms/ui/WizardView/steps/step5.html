<!-- Main Panel -->
<main x-data="WizardStep5.mainStep5xData();">
    <div class="container mt-5" style="max-width: 900px;">
        <div class="row">
            <!-- Status -->
            <div class="col-6">
                <label for="form_status" class="form-label" x-text="utils.translateForFieldLabel('LBL_STATUS')"></label>
                <select id="form_status" class="form-select" x-model="bean.status">
                    <template x-for="item in utils.getList('stic_advanced_web_forms_status_list')" :key="item.id">
                        <option :value="item.id" x-text="item.text" :selected="item.id == bean.status"></option>
                    </template>
                </select>
            </div>

            <!-- Preview -->
            <div class="col-6 d-flex align-items-end">
                <button type="button" class="button">
                    <a :href="previewUrl" target="_blank" class="btn button" x-text="utils.translate('LBL_PREVIEW_IN_NEW_TAB')" ></a>
                </button>
            </div>
        </div>
        <div class="row">
            <!-- Start date -->
            <div class="col-6">
                <label for="form_start_date" class="form-label" x-text="utils.translateForFieldLabel('LBL_START_DATE')"></label>
                <input type="datetime-local" class="form-control" id="form_start_date" x-model="bean.start_date">
            </div>
            <!-- End date -->
            <div class="col-6">
                <label for="form_end_date" class="form-label" x-text="utils.translateForFieldLabel('LBL_END_DATE')"></label>
                <input type="datetime-local" class="form-control" id="form_end_date" x-model="bean.end_date">
            </div>
        </div>
        </div>

        <!-- Publish Form -->
        <div class="card p-2 mt-4" x-data="{ formPublishTabSelected:'link' }">
            <div class="card-header" >
                <h3 x-text="utils.translate('LBL_FORM_PUBLISH_OPTIONS')"></h3>
            </div>
            <div class="card-body">
                <div class="accordion">
                    <!-- Link -->
                    <div class="accordion-item" x-data="{opened:true}">
                        <div id="formLink_Header" class="accordion-header accordion-button" role="button" 
                             :class="{'collapsed': !opened}" @click="opened = !opened" data-bs-toggle="collapse" 
                             data-bs-target="#formLink_Content" aria-controls="formLink_Content">
                            <h4 x-text="utils.translate('LBL_FORM_PUBLISH_LINK')"></h4>
                        </div>
                        <div id="formLink_Content" class="accordion-collapse collapse show" aria-labelledby="formLink_Header">
                            <div class="accordion-body">
                                <div class="p-2 form-text text-muted small fst-italic">
                                    <i class="suitepicon suitepicon-action-info me-1"></i>
                                    <span x-text="utils.translate('LBL_FORM_PUBLISH_LINK_DESC')"></span>
                                </div>
                                <div class="input-group">
                                    <input type="text" class="form-control" :value="publicUrl" readonly>
                                    <button type="button" class="btn" @click="copyToClipboard(publicUrl)" x-text="utils.translate('LBL_BUTTON_COPY')"></button>
                                    <button type="button" class="btn">
                                        <a :href="publicUrl" target="_blank" x-text="utils.translate('LBL_BUTTON_OPEN')"></a>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Iframe -->
                    <div class="accordion-item" x-data="{opened:false}">
                        <div id="formIframe_Header" class="accordion-header accordion-button" role="button" 
                             :class="{'collapsed': !opened}" @click="opened = !opened" data-bs-toggle="collapse" 
                             data-bs-target="#formIframe_Content" aria-controls="formIframe_Content">
                            <h4 x-text="utils.translate('LBL_FORM_PUBLISH_IFRAME')"></h4>
                        </div>
                        <div id="formIframe_Content" class="accordion-collapse collapse" aria-labelledby="formIframe_Header">
                            <div class="accordion-body">
                                <div class="p-2 form-text text-muted small fst-italic">
                                    <i class="suitepicon suitepicon-action-info me-1"></i>
                                    <span x-text="utils.translate('LBL_FORM_PUBLISH_IFRAME_DESC')"></span>
                                </div>
                                <div class="input-group">
                                    <textarea class="form-control font-monospace small bg-light" rows="2" readonly x-model="iframeCode" 
                                              style="width:70% !important; resize: none; height: 50px !important;"></textarea>
                                    <button type="button" class="btn" @click="copyToClipboard(iframeCode)" x-text="utils.translate('LBL_BUTTON_COPY')"
                                            style="height: 50px !important;"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Html -->
                    <div class="accordion-item" x-data="{opened:false}">
                        <div id="formHtml_Header" class="accordion-header accordion-button" role="button" 
                             :class="{'collapsed': !opened}" @click="opened = !opened" data-bs-toggle="collapse" 
                             data-bs-target="#formHtml_Content" aria-controls="formHtml_Content">
                            <h4 x-text="utils.translate('LBL_FORM_PUBLISH_HTML')"></h4>
                        </div>
                        <div id="formHtml_Content" class="accordion-collapse collapse" aria-labelledby="formHtml_Header">
                            <div class="accordion-body">
                                <div class="p-2 form-text text-muted small fst-italic">
                                    <i class="suitepicon suitepicon-action-info me-1"></i>
                                    <span x-text="utils.translate('LBL_FORM_PUBLISH_HTML_DESC')"></span>
                                </div>
                                <textarea class="form-control font-monospace small bg-light" rows="10" readonly x-model="generatedHtml"></textarea>
                                <div class="mt-2 text-end">
                                    <button type="button" class="btn button" @click="copyToClipboard(generatedHtml)" x-text="utils.translate('LBL_BUTTON_COPY')"></button>
                                    <button type="button" class="btn button" @click="downloadHtml()" x-text="utils.translate('LBL_BUTTON_DOWNLOAD')"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>