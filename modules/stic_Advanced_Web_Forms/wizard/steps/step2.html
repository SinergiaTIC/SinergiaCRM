<!-- Sidebar -->
<!--       data-attribute="x-on:change='treeToggleAllModules(step2.treeShowAllModules)'" -->
<nav class="wizard-sidebar bg-light border-end p-2 flex-shrink-0">
  <h3 class="text-muted" x-text="translate('LBL_MODULES')"></h3>
  <div
    class="text-muted form-check form-switch"
    id="switch_TreeAllModules"
    data-model="step2.treeShowAllModules"
    data-label="LBL_SHOW_ALL_MODULES"
    data-attribute="x-on:change='treeToggleAllModules(step2.treeShowAllModules)'"
    x-init="sticControls.fieldCheckbox($el);"
  ></div>
  <div id="jstree-loading" style="display: flex; justify-content: center; align-items: center; height: 200px">
    <div class="spinner-border text-secondary" role="status"></div>
  </div>
  <div
    class="wizard-tree"
    id="jstree-container"
    x-init="$nextTick(() => {initializeModuleTree($('#jstree-container'));});"
    style="display: none"
  ></div>
</nav>

<!-- Main Panel -->
<main class="wizard-main flex-fill d-flex flex-column p-3">
  <h3 class="mb-2" x-text="translate('LBL_DATABLOCKS')"></h3>
  <div class="flex-fill border rounded p-2 bg-white">
    <!-- Main Content -->
    <div class="card p-4"></div>

    <!-- Selected item Details [DEBUG] -->
    <div
      class="text-muted form-check form-switch mb-3 mt-5"
      id="showDetailsDataToggleSwitch"
      data-model="step2.showDetailsData"
      data-label-text="[Mostrar Detalles]"
      x-init="sticControls.fieldCheckbox($el);"
    ></div>
    <div class="card p-4" x-show="step2.showDetailsData">
      <h3 class="card-title" x-text="step2.treeSelectedRelatedModule.pathText?.join(' Â» ')"></h3>
      <div class="mb-3">
        <div
          class="form-check form-check-inline"
          id="detailsSelPanel1"
          data-model="step2.detailsActivePanel"
          data-value="panel1"
          data-label-text="[General Data]"
          x-init="sticControls.fieldRadio($el);"
        ></div>
        <div
          class="form-check form-check-inline"
          id="detailsSelPanel2"
          data-model="step2.detailsActivePanel"
          data-value="panel2"
          data-label-text="[Fields]"
          x-init="sticControls.fieldRadio($el);"
        ></div>
        <div
          class="form-check form-check-inline"
          id="detailsSelPanel3"
          data-model="step2.detailsActivePanel"
          data-value="panel3"
          data-label-text="[Relationships]"
          x-init="sticControls.fieldRadio($el);"
        ></div>
      </div>
      <!-- General Data -->
      <div x-show="step2.detailsActivePanel === 'panel1'" class="p-3 border rounded overflow-auto">
        <h4 class="card-title" x-text="step2.treeSelectedRelatedModule.name"></h4>
        <template x-for="(value, key) in step2.treeSelectedRelatedModule">
          <template x-if="key!='fields' && key!='relationships'">
            <template x-if="value!=''">
              <p x-text="key + ': ' + value"></p>
            </template>
          </template>
        </template>
      </div>
      <!-- Fields -->
      <div x-show="step2.detailsActivePanel === 'panel2'" class="p-3 border rounded overflow-auto">
        <h4
          class="card-title"
          x-text="(step2.treeSelectedRelatedModule.isRelation?step2.treeSelectedRelatedModule.moduleDestName:step2.treeSelectedRelatedModule.name) + ' - Fields'"
        ></h4>
        <div
          class="form-check form-switch form-check-inline"
          id="detailsFieldsInViewToggleSwitch"
          data-model="step2.detailsFieldHideNotInView"
          data-label-text="[Ocultar no in View]"
          x-init="sticControls.fieldCheckbox($el);"
        ></div>
        <div
          class="form-check form-switch form-check-inline"
          id="detailsFieldsRequiredToggleSwitch"
          data-model="step2.detailsFieldHideNotRequired"
          data-label-text="[Ocultar no required]"
          x-init="sticControls.fieldCheckbox($el);"
        ></div>
        <div
          class="mt-3"
          id="detailsFieldsTable"
          data-objects="step2.treeSelectedRelatedModule.fields"
          data-show-row="(!step2.detailsFieldHideNotRequired || step2.treeSelectedRelatedModule.fields[key].required) && (!step2.detailsFieldHideNotInView || step2.treeSelectedRelatedModule.fields[key].inViews)"
          x-init="sticControls.elemTableObjects($el);"
        ></div>
      </div>
      <!-- Relationships -->
      <div x-show="step2.detailsActivePanel === 'panel3'" class="p-3 border rounded overflow-auto">
        <h4
          class="card-title"
          x-text="(step2.treeSelectedRelatedModule.isRelation?step2.treeSelectedRelatedModule.moduleDestName:step2.treeSelectedRelatedModule.name) + ' - Relationships'"
        ></h4>
        <div
          class="mt-3"
          id="detailsRelationshipsTable"
          data-objects="step2.treeSelectedRelatedModule.relationships"
          x-init="sticControls.elemTableObjects($el);"
        ></div>
      </div>
      <!-- <div>
        <p x-text="'Config DataBlocks: ' + JSON.stringify(configDataBlocks)"></p>
        <p x-text="'Config (bean): ' + bean.config_json"></p>
      </div> -->
    </div>
  </div>
</main>
